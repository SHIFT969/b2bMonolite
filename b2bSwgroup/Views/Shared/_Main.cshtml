<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title></title>
    <script src="~/Scripts/jquery-3.2.1.js"></script>
    <script src="~/Scripts/jquery.unobtrusive-ajax.js"></script>
    <script src="~/Scripts/bootstrap.min.js"></script>
    <link href="~/Content/bootstrap.css" rel="stylesheet" />

    
</head>
<body>
@if (User.Identity.IsAuthenticated == true)
{
    if (!User.IsInRole("ComfirmedUser") && !User.IsInRole("Admin"))
    {        
        <div class="alert alert-warning">
            <button type="button" class="close" data-dismiss="alert">×</button>
            <p id="confirmMessage"></p>
        </div>
        @*<div class="alert alert-warning">
            <button type="button" class="close" data-dismiss="alert">×</button>
            <strong>
        </div>*@
    }
}

   
        <nav class="navbar navbar-default" role="navigation">
            <div class="container-fluid">
                <div class="collapse navbar-collapse row">
                    
                    <ul id="menu" class="nav navbar-nav col-lg-10">
                        <li>@Html.ActionLink("Главная", "Index", "PositionCatalogs")</li>   
                        @if (User.IsInRole("Distributor"))
                        {
                            <li>@Html.ActionLink("Мой каталог", "MyPositions", "PositionCatalogs")</li>
                            <li>@Html.ActionLink("Сопоставление категорий", "Index", "CrossCategories")</li>
                        }
                        @if (User.IsInRole("User"))
                        {
                            <li>@Html.ActionLink("Мои спецификации", "Index", "Specifications")</li>
                        }
                        
                        @if (User.IsInRole("Admin"))
                        {
                            <li>@Html.ActionLink("Роли", "Index", "Roles")</li>
                            <li>@Html.ActionLink("Управление пользователями", "Index", "Admin")</li>
                            <li>@Html.ActionLink("Дистрибьютеры", "Index", "Distributors")</li>
                            <li>@Html.ActionLink("Клиенты", "Index", "Customers")</li>
                            <li>@Html.ActionLink("Справочник валют", "Index", "Currencies")</li>
                            <li>@Html.ActionLink("Справочник категорий", "Index", "Categories")</li>
                        }
                        
                    </ul>
                    <div class="col-lg-2">
                    @if (User.Identity.IsAuthenticated)
                    {
                        <p>@User.Identity.Name</p>
                        @Html.ActionLink("Выйти", "Logout", "Account")
                    }
                    else
                    {
                        @Html.ActionLink("Войти", "Login", "Account")
                    }
                    </div>
                    
                </div>
                
            </div>
        </nav>
    
    <div>
        @RenderBody()    
    </div>
</body>
</html>

<script>
    $(window).ready(function () {
        $('#menu li').each(function ()
        {
            var a = $(this).find('a:first');
            if(a.prop("href") === location.href)
            {
                $(this).addClass("active");
            }

            var message = $("#confirmMessage");
            if(randomInteger(1,2)===1)
            {
                message.text("Подтвердите компанию для доступа к расширенному функционалу. Подтвержденные компании имеют возможность указать Заказчика в Спецификации");
            }
            else
            {
                message.text("Подтвердите компанию для доступа к расширенному функционалу. Пользователи подтвержденных компаний видят историю создания Спецификаций");
            }

        });
    });
    function randomInteger(min, max) {
        var rand = min - 0.5 + Math.random() * (max - min + 1)
        rand = Math.round(rand);
        return rand;
    }
   
</script>
